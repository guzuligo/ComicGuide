<html>
    <head>
        <link rel="stylesheet" type="text/css" href="test2b.css">
        <script>
            var div,spr;

            function body(){
              div=document.getElementById("main")
              spr=document.getElementById("0")
              resize()
            }
            
            function resize(){
                var r= spr.getBoundingClientRect()
                var b=[spr.parentElement.clientWidth,spr.parentElement.clientHeight];
                if (b[0]/b[1]<740/360)
                    b=[740,b[0]]
                else
                    b=[360,b[1]]
                var s=Math.min(b[0],b[1]) /b[0];
                div.style.transform="scale("+(s*100)+"%)";
                spr.style.width=s*740
                spr.style.height=s*360
                console.log("Resize to spr " + r.right+", div " + spr.clientWidth)
            }
            window.onresize=function(){resize();}


            
        </script>
    </head> 
    <body bgcolor="#333344" class="marg" onload="body()">
        <div id="0" class="superdiv" >
            <div class="maindiv nomove " id="main" >
                <img src="tttt.jpg" width="300 px">
            </div>
        </div>
        test
    </body>
</html>